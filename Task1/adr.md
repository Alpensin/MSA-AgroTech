### <a name="_b7urdng99y53"></a>**Название задачи:** 
Платформа для мониторинга скота
### <a name="_hjk0fkfyohdk"></a>**Автор:**
МА
### <a name="_uanumrh8zrui"></a>**Дата:**
27.10.2025
### <a name="_3bfxc9a45514"></a>**Функциональные требования**


|**№**|**Действующие лица или системы**|**Use Case**|**Описание**|
| :-: | :- | :- | :- |
|1|Управление Edge-устройствами, Edge-устройство (кормушка), Сбор метрик|Кормление животных|По расписанию осуществляется подача и перекрытие подачи корма. Фиксируются остатки|
|2|Видеорегистратор, Edge-устройство (видеокамера), Анализ данных видеомониторинга, сбор метрик, отправка уведомлений, Оператор|Фиксация необычного поведения животных|ИИ фиксирует необычное поведение животных, фиксирует в метриках и отправляет уведомление|
|3|Управление Edge-устройствами, Edge-устройство (кормушка), Сбор метрик, уведомления, Оператор|Фиксация поломки, загрязнения фильтров, опустошения кормушки и т.д.|Система контроля edge-устройствами фиксирует неполадку, фиксирует в метриках и отправляет уведомление|
|4|Управление Edge-устройствами, Edge-устройство (датчик на скоте, видеокамера), Анализ данных с видеомониторинга, Сбор метрик|Пересчет скота|Система контроля edge-устройствами записывает количество скота по датчика и/или Анализ данных с видеомониторинга проводит расчет с помощью ИИ. Фиксируется в метриках|
|5|Расписание, Управление Edge-устройствами, Анализ данных с видеомониторинга, Оператор, Дежурная Смена|Переконфигурация|Задается новое расписание работы, меняется конфигурация систем управления|
### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**
|**№**|**Требование**|
| :-: | :- |
|1|Задержка до 10 минут без учета проблем со связью|
|2|Резерв связи для отправки уведомлений оператору|
|3|Возможность интегрировать заказчикам при реализации как SAAS|
|4|Работа автономно при потере связи с Центральным Узлом|
|5|Иметь API для мобильного приложения и веб-приложения|
|6|Позволять системе видеоаналитики реагировать в реальном времени (миллисекунды)|
|7|Иметь высокую производительность — от момента возникновения нештатной ситуации, зафиксированной с помощью видеоаналитики, должно проходить не более 5 секунд до момента оповещения|
|8|Отказоустойчивость 99,95%|
|9|Быть расширяемой, то есть иметь возможность разработать новый функционал без изменений существующего|
### <a name="_qmphm5d6rvi3"></a>**Решение**
#### Основное решение:
[main](./main-context.puml)

Данное решение позволит минимизировать объем данных, передаваемых между Фермой и Центральным Узлом. В Центральный Узел будут отправляться только уведомления и метрики. От Центрального узла будут приходить только команды на настройку и управление. Самая "тяжелая" операция - обновления модели ИИ. Выполняется нечасто.
Система способна сохранить весь функционал при обрыве связи с Центральным Узлом.

Система Отправки Уведомлений на Ферме должна быть оснащена оборудованием для отправки СМС через сотовые сети. Необходимо для отправки уведомлений через СМС в случае недоступности Оператора по WiFi.

### <a name="_bjrr7veeh80c"></a>**Альтернативы**
[alternative](./alternative-context.puml)
В альтернативном решение управление расписанием и анализ видеопотоков перенесены в Центральный Узел, 

Перенос расписания упрощает в будущем развитие API для управления фермами. Но потребует создания альтернативных способов изменения расписания на ферме в случае отсутствия связи между фермой и центральным узлом.

Размещение видеоаналитики в центральном узле позволяет оптимизировать затраты на вычислительные ресурсы, проводя тяжелые операции в дата-центре. Это упростить будущее распространение решения как SAAS. 
Из минуса такого подхода - в случае отсутствия связи с фермой, теряется функционал видеоаналитики, так как поток видео прервется.
Кроме этого серьезно повышаются требования к пропускной способности канала между фермой и центральным узлом.
А также требуется достаточно ресурсов для обработки потоков видео в реальном времени. В случае, если потоков видео будет больше, чем пропускная способность ИИ аналитики, будет снижаться эффективность анализа из-за пропуска кадров.

**Недостатки, ограничения, риски**

1. Большое количество оборудования расположено на самих фермах
2. Возможны перебои со связью между фермой и Центральным Узлом
3. Возможна потеря связи у Оператора. Это может привести к задержкам в уведомлениях.
4. При выборе основного решения на каждой ферме требуется высокопроизводительный сервер с GPU для размещения ИИ модели.